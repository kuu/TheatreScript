'use strict';(function(e){function h(){var a=e.document.createElement("canvas");a.width=this.width||this.parent.width||1;a.height=this.height||this.parent.height||1;this.context=a.getContext("2d");this.invalidate()}var b=e.theatre,g=b.createActor("CanvasActor",b.Actor,function(a){this.width=a.width||0;this.height=a.height||0;this.context=null;this.listen("enter",h)}),i=b.Actor.prototype.invalidate;Object.defineProperties(g.prototype,{draw:{value:function(a){a.clearRect(0,0,this.width,this.height)}},
getDrawResult:{value:function(){var a=this.context;if(!0!==this.isInvalidated)return a.canvas;a.save();this.draw(a);a.restore();for(var b=this.getActors(),f=0,e=b.length;f<e;f++){var c=b[f],d=c.matrix,c=void 0!==c.getDrawResult?c.getDrawResult():null;null!==c&&(a.save(),a.transform(d.a,d.b,d.c,d.d,d.e,d.f),a.drawImage(c,0,0),a.restore())}return a.canvas}},act:{value:function(){var a=this.getDrawResult();!0!==this.isAdded&&(this.isAdded=!0,b.crews.dom&&this.parent instanceof b.crews.dom.DOMActor&&
(a.style.zIndex=this.layer,this.parent.element.appendChild(a)))}},invalidate:{value:function(){i.call(this);this.parent.invalidate()}}});b.define("theatre.crews.canvas.CanvasActor",g)})(this);
